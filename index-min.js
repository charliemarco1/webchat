var express=require("express"),app=express(),server=require("http").Server(app),port=process.env.PORT||3e3,io=require("socket.io")(server);server.listen(3e3,"104.131.116.211"),app.use(express.static(__dirname)),app.get("/",function(e,n){n.sendFile(__dirname+"/index.html")}),app.get("/onlineusers",function(e,n){n.send(io.sockets.adapter.rooms)}),io.on("connection",function(e){console.log("A user connected:"+e.id),io.emit("user joined",e.id),e.on("chat.message",function(e){io.emit("chat.message",e)}),e.on("user typing",function(e){io.emit("user typing",e)}),e.on("stopped typing",function(e){io.emit("stopped typing",e)}),e.on("disconnect",function(){console.log("User left: "+e.id),e.broadcast.emit("user left",e.id)})});